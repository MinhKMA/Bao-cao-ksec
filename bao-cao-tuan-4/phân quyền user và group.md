#Quản lý user và group##1.SuperuserTrong hệ thống Linux, tài khoản root có quyền cao nhất được sử dụng bởi người quản trị. Sử dụng quyền root chúng ta thấy rất thoải mái vì chúng ta có thể thực hiện các thao tác mà không phải lo lắng gì đến vấn đề quyền truy cập, vì root có quyền cao nhất trong hệ thống. Tuy nhiên, khi hệ thống bị sự cố do một lỗi nào đó, chúng ta mới thấy sự nguy hiểm khi làm việc với root, do vậy phải hạn chế sử dụng toàn khoản root. Với những server quan trọng và có nhiều dịch vụ khác nhau, bạn có thể tạo ra các superuser thích hợp cho từng dịch vụ để tránh dùng root cho các công việc này. Ví dụ như superuser cho công tác backup chỉ cần chức năng đọc (read-only) mà không cần chức năng ghi.Trong Linux, chúng ta có thể tạo tài khoản có tên khác nhưng có quyền root bằng cách tạo UserID bằng 0. Cần phân biệt bạn đang login bằng root hay người sử dụng thường thông qua dấu nhắc lệnh shell.**Dấu $ cho thấy bạn đang kết nối như một người sử dụng thường. Dấu # cho thấy bạn đang thực hiện lệnh với root.**##2.Thông tin của userMỗi tài khoản người dùng phải có một tên sử dụng (username) và mật khẩu (password) riêng. Tập tin /etc/passwd là tập tin chứa thông tin về tài khoản người dùng của hệ thống.<ul><li>Tập tin /etc/passwdTập tin **/etc/passwd** đóng vai trò rất quan trọng đối với một hệ thống Linux. Mọi người đều có thể đọc tập tin này nhưng chỉ có **root mới có quyền thay đổi**. Tập tin /etc/passwd được lưu dưới dạng văn bản như hầu hết các tập tin cấu hình khác của Linux.<img src="http://tuhocmang.com/wp-content/uploads/2014/07/linux12_6_13.png">Nội dung của tập tin **/etc/passwd**:Mỗi tài khoản được lưu trong một dòng gồm 7 cột mỗi cột được ngăn cách bởi dấu hai chấmCột 1 Username: Tên người sử dụngCột 2 Password: Mã liên quan đến mật khẩu của tài khoản là “x” đối với Linux. Linux lưu mã này trong một tập tin là /etc/shadow mà chỉ có root mới có quyền đọc.Cột 3 User ID: Mã định danh tài khoản (User ID). Hệ thống sử dụng UID (User ID) để phân biệt người này với người khác.Cột 4 Group ID: Mã định danh nhóm (Group ID). Đây là primary group của user này.Cột 5 Comment: Mô tả về tài khoản.Cột 6 Home Directory: Thư mục home của từng user, thường sẽ nằm trong /home/”têntàikhoản”Cột 7 Shell: Tên chương trình sẽ thực thi ngay sau khi đăng nhập. Nếu không có shell sẽ không thể đăng nhập. Mặc định trên Linux sẽ dùng bash shell.Dòng đầu tiên của tập tin /etc/passwd mô tả thông tin cho user root (tất cả những tài khoản có User ID = 0 đều là root), tiếp theo là các tài khoản khác của hệ thống, cuối cùng là các tài khoản người dùng thường.<li>Username và User IDTên người dùng là chuỗi ký tự xác định duy nhất một người dùng, người dùng sử dụng tên này khi đăng nhập cùng như truy xuất tài khoản, trong Linux tên người dùng có sự phân biệt giữa chữ hoa và thường. Thông thường, tên người dùng thường sử dụng chữ thường. Để dễ dàng trong việc quản lý người dùng, ngoài tên người dùng Linux còn sử dụng khác niệm định danh người dùng (User ID). Mỗi người dùng có một con số định danh riêng.Linux sử dụng User ID để kiểm soát hoạt động của người dùng. Theo quy định chung, những nguời dùng có định danh là 0 là người dùng quản trị (root). Các User ID từ 1-99 sử dụng cho các tài khoản hệ thống, User ID của người dùng thường sử dụng giá trị bắt đầu từ 100.<li>Mật khẩu người dùngMỗi người dùng có một mật khẩu riêng để sử dụng tài khoản của mình. Mọi người đều có quyền đổi mật khẩu của chính mình. Người quản trị có thể đổi mật khẩu của những người khác.Tập tin /etc/shadow: Chứa chuỗi password đã mã hóa bằng hàm băm cũng như lưu trữ một số thông tin khác như tên đăng nhập của người dùng, các thông tin về thời gian hết hạn của mật khẩu …<img src ="http://tuhocmang.com/wp-content/uploads/2014/07/linux12_6_14.png">**Nội dung tập tin /etc/shadow**Cột 1 : Tên của tài khoảnCột 2 : Mật khẩu của tài khoản đã được mã hóa . Trường hợp những tài khoản nào có mật khẩu là !! tức là tài khoản này tạm thời đang bị khóa còn”*” tài khoản bị disable.Cột 3 : Số ngày kể từ khi mật khẩu được thay đổi lần cuối cùng thay đổi mật khẩu lần cuối cùng tính từ kỷ nguyên 1-1-1970Cột 4 : Số ngày tối thiểu giữa các lần thay đổi mật khẩu , 0 là có thể thay đổi bất cứ lúc nàoCột 5 : Số ngày sau đó mật khẩu phải được thay đổiCột 6 : Số ngày cảnh báo người dùng phải thay đổi mật khẩu trước khi mật khẩu hết hạnCột 7 : Số ngày sau khi mật khẩu hết hạn, tài khoản bị disableCột 8 : Số ngày kể từ ngày 1 -1-1970 tài khoản bị vô hiệuCột 9 : Một lĩnh vực dùng riêng có thể sử dụng trong tương laiKý tự “$” trước mật khẩu đã được mã hóa của người dùng cho biết mật khẩu này được tạo sử dụng một thuật toán mã hóa.<li>Group IDKhái niệm Group ID để định danh nhóm của người dùng, thông qua Group ID này cỏ thể xác định người dùng đó thuộc nhóm nào, thông thường trên Linux, GID (Group ID) được mặc định tạo ra khi tạo một tài khoản và có giá trị >=500.<li>Home DirectoryKhi người dùng login vào hệ thống được đặt làm việc tại thư mục cá nhân của mình. Thường khi mỗi người có một thư mục cá nhân riêng, người dùng có toàn quyền trên đó, nó dùng để chứa dữ liệu cá nhân và các thông tin hệ thống cho hoạt động của người dùng như biến môi trường, script khởi động, profile khi sử dụng X window… Home directory của người dùng thường là /home; cho root là /root. Tuy nhiên ta cũng có thể đặt vào vị trí khác nhau thông qua lệnh useradd hoặc usermod.</UL>##3.Quản lý người dùng<li>Tạo tài khoảnĐề tạo một tài khoản, bạn có thể sử dụng lệnh useradd, cú pháp lệnh useradd như sau:#useradd [tùy_chọn] tên_tài_khoản–d : Thiết lập thư mục home của người dùng. Mặc định khi ta tạo một người dùng thi sẽ được tạo trong thư mục /home/tên_tài_khoản– m: Tạo thư mục home của người dùng nếu không có– M: Không tạo thư mục home của người dùng– u: Mặc định sẽ lấy số ID tiếp theo để gán cho user. (User ID)– g: Nhóm khởi tạo (GID).  GID phải tồn tại.– G: Thêm người dùng vào các group– c: Mô tả (Tên đầy dủ)– e: Ngảy hết hạn của tài khoản<li>Thay đổi thông tin tài khoảnBạn có thể thay đổi lại thông tin tài khoản từ tập tin /etc/passwd hoặc dùng lệnh usermod. Cú pháp của lệnh usermod: usermod [tùy_chọn] [tên_tài_khoản]Lệnh usermod cũng tương tự như useradd nhưng có 1 vài lệnh khác biệt. Các bạn gõ usermod hoặc man usermod để biết thêm thông tin về lệnh.<li>Tạm khóa tài khoản người dùngĐể tạm khóa tài khoản trong hệ thống ta có thể dùng nhiều cách:Khóa:passwd -l [tên_tài_khoản]usermod -L [tên_tài_khoản]Mở khóa:passwd -u [tên_tài_khoản]usermod -U [tên_tài_khoản]Ta có thể tạm khóa bằng cách gán /bin/false vào shell mặc định của user trong file /etc/passwd.<li>Hủy tài khoảnLệnh userdel dùng để xóa một tài khoản. Ngoài ra, bạn cũng có thể xóa một tài khoản bằng cách xóa đi dòng dữ liệu tương ứng với tài khoản đó trong tập tin /etc/passwd. Cú pháp lệnh:userdel [tùy_chọn] [tên_tài_khoản]##4Nhóm người dùngThiết lập những người dùng có chung một số đặc điểm nào đó hay có chung quyền hạn trên tài nguyên vào chung một nhóm. Mỗi nhóm có một tên riêng và một định danh nhóm (GID), một nhóm có thể có nhiều người dùng và người dùng có thể là thành viên của nhiều nhóm khác nhau.Thông tin về nhóm lưu tại tập tin /etc/group. Mỗi dòng định nghĩa một nhóm, các trường trên dòng cách nhau bằng dấu “:” và dấu “,” ngăn cách danh sách các thành viên.``[tên_nhóm]:[password_của_nhóm]:[định_danh_nhóm]:[các_user_thuộc_nhóm]``###Tạo nhómChúng ta có thể chỉnh sửa trực tiếp trong tập tin /etc/group hoặc dùng lệnh groupadd. Cú pháp:groupadd [tên_nhóm]###Thêm người dùng vào nhómChúng ta có thể sửa từ tập tin /etc/group. Một cách khác là cho từng người dùng vào nhóm lệnh:usermod -G [tên_nhóm] [tên_tài_khoản]###Thay đổi thông tin nhómĐể thay đổi thông tin nhóm ta dùng lệnh:groupmod [tùy_chọn] [tên_nhóm]Ta có thể xóa trực tiếp trong tập tin /etc/group hay dùng lệnh:groupdel [tên_nhóm]### Xem thông tin về user và groupTa có thể dùng lệnh groups hoặc id để xem thông tin về một tài khoản hay một nhóm nào đó trong hệ thống, cú pháp lệnh:Ta có thể xem tên nhóm của một tài khoản nào đó ta dùng lệnh:groups [tên_tài_khoản]